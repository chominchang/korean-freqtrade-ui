import{a as F,_ as H}from"./TradesLogChart-CHejX5XD.js";import{c as K}from"./TradeList.vue_vue_type_script_setup_true_lang-DThci9Dd.js";import{b as Q,c as X}from"./InfoBox.vue_vue_type_script_setup_true_lang-BoagT56j.js";import{d as j,u as z,j as u,l as w,a as p,f as e,h as a,b as s,e as x,k as h,c as N,W as Y,x as S,z as T,i as Z,b2 as ee,G as te,D as oe,J as se,r as ae,L as D,b3 as $,o as re,N as P,M as G}from"./index-B_v6adOj.js";import{s as ne,a as ie}from"./index-DgUDcEHW.js";import{_ as le}from"./DraggableContainer.vue_vue_type_script_setup_true_lang-DHspYSQf.js";import{_ as de}from"./PeriodBreakdown.vue_vue_type_script_setup_true_lang-CtMNijWw.js";import"./installCanvasRenderer-D8Ld7rAI.js";import"./chartZoom-VPVfHurq.js";import"./index-B9PkDuDZ.js";import"./index-CGWBOtXF.js";import"./index-DZlBha1f.js";import"./index-BskzHftK.js";import"./index-CzoAdAQz.js";import"./index-B1wKJkPu.js";import"./install-CN0bTneb.js";const ue={class:"flex flex-row justify-between items-center"},ce={key:2},me={key:0},pe=["title"],fe={class:"text-sm"},_e={key:0},ye={class:"text-profit"},he={class:"text-loss"},be=j({__name:"BotComparisonList",setup(A){const o=z(),b=u({get:()=>Object.values(o.botStores).every(d=>d.isSelected),set:d=>{for(const r in o.botStores)o.botStores[r].isSelected=d}}),R=u(()=>{const d=[],r={botId:void 0,botName:"Summary",profitClosed:0,profitClosedRatio:void 0,profitOpen:0,profitOpenRatio:void 0,stakeCurrency:"USDT",wins:0,losses:0};return Object.entries(o.allProfit).forEach(([n,i])=>{var t,c,m,g,C,V,v,B;const f=o.allOpenTrades[n].reduce((L,l)=>L+l.stake_amount,0),_=o.allOpenTrades[n].reduce((L,l)=>L+(l.total_profit_ratio??l.profit_ratio)*l.stake_amount,0)/f,y=o.allOpenTrades[n].reduce((L,l)=>L+(l.total_profit_abs??l.profit_abs??0),0);d.push({botId:n,botName:o.availableBots[n].botName||o.availableBots[n].botId,trades:`${o.allOpenTradeCount[n]} / ${((t=o.allBotState[n])==null?void 0:t.max_open_trades)||"N/A"}`,profitClosed:i.profit_closed_coin,profitClosedRatio:i.profit_closed_ratio||0,stakeCurrency:((c=o.allBotState[n])==null?void 0:c.stake_currency)||"",profitOpenRatio:_,profitOpen:y,wins:i.winning_trades,losses:i.losing_trades,balance:((m=o.allBalance[n])==null?void 0:m.total_bot)??((g=o.allBalance[n])==null?void 0:g.total),stakeCurrencyDecimals:((C=o.allBotState[n])==null?void 0:C.stake_currency_decimals)||3,isDryRun:(V=o.allBotState[n])==null?void 0:V.dry_run,isOnline:(v=o.botStores[n])==null?void 0:v.isBotOnline}),i.profit_closed_coin!==void 0&&o.botStores[n].isSelected&&(r.profitClosed+=i.profit_closed_coin,r.profitOpen+=y,r.wins+=i.winning_trades,r.losses+=i.losing_trades,r.stakeCurrency=((B=o.allBotState[n])==null?void 0:B.stake_currency)||r.stakeCurrency)}),d.push(r),d});return(d,r)=>{const n=Y,i=ee,f=ie,_=Q,y=ne;return p(),w(y,{size:"small",value:e(R)},{default:a(()=>[s(f,{field:"botName",header:"Bot"},{body:a(({data:t,field:c})=>[x("div",ue,[x("div",null,[t.botId&&e(o).botCount>1?(p(),w(n,{key:0,modelValue:e(o).botStores[t.botId??""].isSelected,"onUpdate:modelValue":m=>e(o).botStores[t.botId??""].isSelected=m,title:"Show this bot in Dashboard"},{default:a(()=>[S(T(t[c]),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])):h("",!0),!t.botId&&e(o).botCount>1?(p(),w(n,{key:1,modelValue:e(b),"onUpdate:modelValue":r[0]||(r[0]=m=>Z(b)?b.value=m:null),title:"Toggle all bots",class:"font-bold"},{default:a(()=>[S(T(t[c]),1)]),_:2},1032,["modelValue"])):h("",!0),e(o).botCount<=1?(p(),N("span",ce,T(t[c]),1)):h("",!0)]),t.isOnline&&t.isDryRun?(p(),w(i,{key:0,class:"items-center bg-green-800 text-slate-200",severity:"success"},{default:a(()=>r[1]||(r[1]=[S("Dry")])),_:1})):h("",!0),t.isOnline&&!t.isDryRun?(p(),w(i,{key:1,class:"items-center",severity:"warning"},{default:a(()=>r[2]||(r[2]=[S("Live")])),_:1})):h("",!0),t.isOnline===!1?(p(),w(i,{key:2,class:"items-center",severity:"secondary"},{default:a(()=>r[3]||(r[3]=[S("Offline")])),_:1})):h("",!0)])]),_:1}),s(f,{field:"trades",header:"Trades"}),s(f,{header:"Open Profit"},{body:a(({data:t})=>[t.profitOpen&&t.botId!="Summary"?(p(),w(_,{key:0,"profit-ratio":t.profitOpenRatio,"profit-abs":t.profitOpen,"profit-desc":`Total Profit (Open and realized) ${("formatPercent"in d?d.formatPercent:e(te))(t.profitOpenRatio??0)}`,"stake-currency":t.stakeCurrency},null,8,["profit-ratio","profit-abs","profit-desc","stake-currency"])):h("",!0)]),_:1}),s(f,{header:"Closed Profit"},{body:a(({data:t})=>[t.profitClosed&&t.botId!="Summary"?(p(),w(_,{key:0,"profit-ratio":t.profitClosedRatio,"profit-abs":t.profitClosed,"stake-currency":t.stakeCurrency},null,8,["profit-ratio","profit-abs","stake-currency"])):h("",!0)]),_:1}),s(f,{field:"balance",header:"Balance"},{body:a(({data:t})=>[t.balance?(p(),N("div",me,[x("span",{title:t.stakeCurrency},T(("formatPrice"in d?d.formatPrice:e(oe))(t.balance??0,t.stakeCurrencyDecimals)),9,pe),x("span",fe,T(` ${t.stakeCurrency}${t.isDryRun?" (dry)":""}`),1)])):h("",!0)]),_:1}),s(f,{field:"winVsLoss",header:"W/L"},{body:a(({data:t})=>[t.losses!==void 0?(p(),N("div",_e,[x("span",ye,T(t.wins),1),r[4]||(r[4]=S(" / ")),x("span",he,T(t.losses),1)])):h("",!0)]),_:1})]),_:1},8,["value"])}}}),we={class:"flex justify-content-center"},ge={class:"flex justify-content-center"},Ie=j({__name:"DashboardView",setup(A){const o=z(),b=se(),R=ae("");function d(v){R.value=v}const r=u(()=>["","sm","md","lg","xl"].includes(R.value)),n=u(()=>b.layoutLocked||!r.value),i=u(()=>r.value?b.dashboardLayout:[...b.getDashboardLayoutSm]);function f(v){r.value&&(console.log("newlayout",v),console.log("saving dashboard"),b.dashboardLayout=v)}const _=u(()=>D(i.value,$.dailyChart)),y=u(()=>D(i.value,$.botComparison)),t=u(()=>D(i.value,$.allOpenTrades)),c=u(()=>D(i.value,$.allClosedTrades)),m=u(()=>D(i.value,$.cumChartChart)),g=u(()=>D(i.value,$.profitDistributionChart)),C=u(()=>D(i.value,$.tradesLogChart)),V=u(()=>({sm:b.getDashboardLayoutSm}));return re(async()=>{o.allGetDaily({timescale:30}),o.activeBot.getOpenTrades(),o.activeBot.getProfit()}),(v,B)=>{const L=de,l=le,O=G("GridItem"),E=be,I=X,U=K,M=F,W=G("ProfitDistribution"),J=H,q=G("GridLayout");return p(),w(q,{class:"h-full w-full",style:{padding:"1px"},"row-height":50,layout:e(i),"vertical-compact":!1,margin:[2,2],"responsive-layouts":e(V),"is-resizable":!e(n),"is-draggable":!e(n),responsive:!0,"prevent-collision":!0,cols:{lg:12,md:12,sm:12,xs:4,xxs:2},"col-num":12,onLayoutUpdated:f,"onUpdate:breakpoint":d},{default:a(({gridItemProps:k})=>[s(O,P(k,{i:e(_).i,x:e(_).x,y:e(_).y,w:e(_).w,h:e(_).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:a(()=>[s(l,{header:`기간별 수익 ${e(o).botCount>1?"통합":""}`},{default:a(()=>[s(L,{"multi-bot-view":""})]),_:1},8,["header"])]),_:2},1040,["i","x","y","w","h"]),s(O,P(k,{i:e(y).i,x:e(y).x,y:e(y).y,w:e(y).w,h:e(y).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:a(()=>[s(l,{header:"봇 비교"},{default:a(()=>[s(E)]),_:1})]),_:2},1040,["i","x","y","w","h"]),s(O,P(k,{i:e(t).i,x:e(t).x,y:e(t).y,w:e(t).w,h:e(t).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:a(()=>[s(l,null,{header:a(()=>[x("div",we,[B[0]||(B[0]=S(" 진행 중인 거래 ")),s(I,{class:"ms-2",hint:"선택된 모든 봇의 진행 중인 거래입니다. 거래를 클릭하면 해당 봇/거래의 거래 페이지로 이동합니다."})])]),default:a(()=>[s(U,{"active-trades":"",trades:e(o).allOpenTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),s(O,P(k,{i:e(m).i,x:e(m).x,y:e(m).y,w:e(m).w,h:e(m).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:a(()=>[s(l,{header:"누적 수익"},{default:a(()=>[s(M,{trades:e(o).allTradesSelectedBots,"open-trades":e(o).allOpenTradesSelectedBots,"show-title":!1},null,8,["trades","open-trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),s(O,P(k,{i:e(c).i,x:e(c).x,y:e(c).y,w:e(c).w,h:e(c).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:a(()=>[s(l,null,{header:a(()=>[x("div",ge,[B[1]||(B[1]=S(" 종료된 거래 ")),s(I,{class:"ms-2",hint:"선택된 모든 봇의 종료된 거래입니다. 거래를 클릭하면 해당 봇/거래의 거래 페이지로 이동합니다."})])]),default:a(()=>[s(U,{"active-trades":!1,"show-filter":"",trades:e(o).allClosedTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),s(O,P(k,{i:e(g).i,x:e(g).x,y:e(g).y,w:e(g).w,h:e(g).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:a(()=>[s(l,{header:"수익 분포"},{default:a(()=>[s(W,{trades:e(o).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),s(O,P(k,{i:e(C).i,x:e(C).x,y:e(C).y,w:e(C).w,h:e(C).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:a(()=>[s(l,{header:"거래 로그"},{default:a(()=>[s(J,{trades:e(o).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"])]),_:1},8,["layout","responsive-layouts","is-resizable","is-draggable"])}}});export{Ie as default};
//# sourceMappingURL=DashboardView-CcvboMN2.js.map

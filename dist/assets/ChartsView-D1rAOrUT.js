import{_ as W}from"./CandleChartContainer-B70R5nBz.js";import{s as D}from"./index-B9JOA02O.js";import{_ as L}from"./TimeRangeSelect.vue_vue_type_script_setup_true_lang-6P7vX6fe.js";import{_ as U,a as N}from"./StrategySelect.vue_vue_type_script_setup_true_lang-7mpt5Uws.js";import{_ as P}from"./ExchangeSelect.vue_vue_type_script_setup_true_lang-DDqJuBNR.js";import{Q as O,r as c,d as $,u as R,j as _,o as H,R as j,S as z,U as A,c as x,a as v,k as h,e as m,f as a,b as d,h as u,V as B,W as I,x as b,X as V,z as y,Y as Q,l as X}from"./index-B_v6adOj.js";import"./index-B9PkDuDZ.js";import"./index-BqfvO8az.js";import"./check-D6h_suYs.js";import"./plus-box-outline-CSP7u_fJ.js";import"./installCanvasRenderer-D8Ld7rAI.js";import"./chartZoom-VPVfHurq.js";import"./index-B1wKJkPu.js";const Y=O("chartConfig",()=>{const f=c(""),e=c(!1),o=c("1h"),l=c("");return{strategy:f,useLiveData:e,selectedTimeframe:o,timerange:l}},{persist:{key:"ftUIChartSettings",pick:["useLiveData"]}}),q={class:"flex flex-col h-full"},F={key:0,class:"md:mx-3 mt-2 px-1"},G={class:"mb-2 border dark:border-surface-700 border-surface-300 rounded-md p-2 text-start"},J={class:"flex flex-row gap-5"},K={class:"grid grid-cols-3 md:grid-cols-5 mx-1 gap-1 md:gap-2"},Z={class:"text-start md:me-1 col-span-2"},ee={class:"flex flex-col text-start"},te={class:"md:mx-2 mt-2 pb-1 h-full"},fe=$({__name:"ChartsView",setup(f){const e=R(),o=Y(),l=_(()=>e.activeBot.isWebserverMode?o.selectedTimeframe||e.activeBot.strategy.timeframe||"":e.activeBot.timeframe),E=_(()=>{var i;if(e.activeBot.isWebserverMode){if(o.useLiveData)return Object.keys(((i=p.value)==null?void 0:i.markets)||{}).sort()||[];if(l.value&&l.value!==""){const t=l.value;return e.activeBot.pairlistWithTimeframe.filter(([n,g])=>g===t).map(([n])=>n)}return e.activeBot.pairlist}return e.activeBot.whitelist});H(()=>{e.activeBot.isWebserverMode?e.activeBot.getAvailablePairs({}):(!e.activeBot.whitelist||e.activeBot.whitelist.length===0)&&e.activeBot.getWhitelist()});function S(i,t){if(console.log("Refreshing OHLCV for pair:",i,l.value,"with columns:",t),e.activeBot.isWebserverMode&&l.value){const n={pair:i,timeframe:l.value,timerange:o.timerange,strategy:o.strategy,columns:t,live_mode:o.useLiveData};s.value.customExchange&&(n.exchange=s.value.selectedExchange.exchange,n.trading_mode=s.value.selectedExchange.trade_mode.trading_mode,n.margin_mode=s.value.selectedExchange.trade_mode.margin_mode),e.activeBot.getPairHistory(n)}else e.activeBot.getPairCandles({pair:i,timeframe:l.value,columns:t})}const s=c({customExchange:!1,selectedExchange:{exchange:e.activeBot.botState.exchange,trade_mode:{margin_mode:z.NONE,trading_mode:j.SPOT}}}),p=c(null);return A(()=>o.useLiveData,async()=>{if(e.activeBot.isWebserverMode&&o.useLiveData){const i={};s.value.customExchange&&(i.exchange=s.value.selectedExchange.exchange,i.trading_mode=s.value.selectedExchange.trade_mode.trading_mode,i.margin_mode=s.value.selectedExchange.trade_mode.margin_mode),p.value=await e.activeBot.getMarkets(i)}},{immediate:!0}),(i,t)=>{const n=I,g=P,C=U,k=N,M=L,w=D,T=W;return v(),x("div",q,[a(e).activeBot.isWebserverMode?(v(),x("div",F,[d(w,{header:"설정",toggleable:""},{default:u(()=>[m("div",G,[m("div",J,[d(n,{modelValue:a(s).customExchange,"onUpdate:modelValue":t[0]||(t[0]=r=>a(s).customExchange=r),class:"mb-2"},{default:u(()=>t[6]||(t[6]=[b(" 커스텀 거래소 ")])),_:1},8,["modelValue"]),B(m("span",null," 현재 거래소: "+y(a(e).activeBot.botState.exchange)+" "+y(a(e).activeBot.botState.trading_mode),513),[[V,!a(s).customExchange]])]),d(Q,{name:"fade"},{default:u(()=>[B(d(g,{modelValue:a(s).selectedExchange,"onUpdate:modelValue":t[1]||(t[1]=r=>a(s).selectedExchange=r)},null,8,["modelValue"]),[[V,a(s).customExchange]])]),_:1})]),m("div",K,[m("div",Z,[t[8]||(t[8]=m("span",null,"전략",-1)),d(C,{modelValue:a(o).strategy,"onUpdate:modelValue":t[2]||(t[2]=r=>a(o).strategy=r),class:"mt-1 mb-1"},null,8,["modelValue"]),a(e).activeBot.botState.api_version>=2.42?(v(),X(n,{key:0,modelValue:a(o).useLiveData,"onUpdate:modelValue":t[3]||(t[3]=r=>a(o).useLiveData=r),class:"align-self-center",title:"거래소에서 실시간 데이터를 사용합니다. 로컬에 다운로드된 데이터가 없는 경우에만 사용하세요."},{default:u(()=>t[7]||(t[7]=[b(" 실시간 데이터 사용 ")])),_:1},8,["modelValue"])):h("",!0)]),m("div",ee,[t[9]||(t[9]=m("span",null,"타임프레임",-1)),d(k,{modelValue:a(o).selectedTimeframe,"onUpdate:modelValue":t[4]||(t[4]=r=>a(o).selectedTimeframe=r),class:"mt-1"},null,8,["modelValue"])]),d(M,{modelValue:a(o).timerange,"onUpdate:modelValue":t[5]||(t[5]=r=>a(o).timerange=r),class:"col-span-3 md:col-span-2"},null,8,["modelValue"])])]),_:1})])):h("",!0),m("div",te,[d(T,{"available-pairs":a(E),"historic-view":a(e).activeBot.isWebserverMode,timeframe:a(l),trades:a(e).activeBot.trades,timerange:a(e).activeBot.isWebserverMode?a(o).timerange:void 0,strategy:a(e).activeBot.isWebserverMode?a(o).strategy:void 0,"plot-config-modal":!1,onRefreshData:S},null,8,["available-pairs","historic-view","timeframe","trades","timerange","strategy"])])])}}});export{fe as default};
//# sourceMappingURL=ChartsView-D1rAOrUT.js.map

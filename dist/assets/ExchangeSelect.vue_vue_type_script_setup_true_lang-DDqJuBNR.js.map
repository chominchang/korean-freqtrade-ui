{"version":3,"file":"ExchangeSelect.vue_vue_type_script_setup_true_lang-DDqJuBNR.js","sources":["../../src/components/ftbot/ExchangeSelect.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport type { ExchangeSelection } from '@/types';\r\n\r\nconst exchangeModel = defineModel<ExchangeSelection>({ required: true });\r\n\r\nconst botStore = useBotStore();\r\n\r\nconst exchangeList = computed(() => {\r\n  const supported = botStore.activeBot.exchangeList\r\n    .filter((ex) => ex.valid && ex.supported)\r\n    .sort((a, b) => a.name.localeCompare(b.name));\r\n\r\n  const unsupported = botStore.activeBot.exchangeList\r\n    .filter((ex) => ex.valid && !ex.supported)\r\n    .sort((a, b) => a.name.localeCompare(b.name));\r\n\r\n  return [\r\n    {\r\n      label: 'Supported',\r\n      options: supported.map((e) => ({ value: e.classname ?? e.name, text: e.name })),\r\n    },\r\n    {\r\n      label: 'Unsupported',\r\n      options: unsupported.map((e) => ({ value: e.classname ?? e.name, text: e.name })),\r\n    },\r\n  ];\r\n});\r\n\r\nconst tradeModesTyped = computed(() => {\r\n  const val = botStore.activeBot.exchangeList.find(\r\n    (ex) =>\r\n      ex.name === exchangeModel.value.exchange || ex.classname === exchangeModel.value.exchange,\r\n  )?.trade_modes;\r\n  return val ?? [];\r\n});\r\n\r\nconst tradeModes = computed(() => {\r\n  return tradeModesTyped.value.map((tm) => {\r\n    return {\r\n      text: `${tm.margin_mode} ${tm.trading_mode}`,\r\n      value: tm,\r\n    };\r\n  });\r\n});\r\n\r\nwatch(\r\n  () => exchangeModel.value.exchange,\r\n  () => {\r\n    if (tradeModesTyped.value.length < 2) {\r\n      exchangeModel.value.trade_mode = tradeModesTyped.value[0];\r\n    }\r\n  },\r\n);\r\n\r\nonMounted(() => {\r\n  if (botStore.activeBot.exchangeList.length === 0) {\r\n    botStore.activeBot.getExchangeList();\r\n  }\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div class=\"w-full flex\">\r\n    <Select\r\n      id=\"exchange-select\"\r\n      v-model=\"exchangeModel.exchange\"\r\n      size=\"small\"\r\n      class=\"min-w-52\"\r\n      filter\r\n      option-group-label=\"label\"\r\n      option-group-children=\"options\"\r\n      option-label=\"text\"\r\n      option-value=\"value\"\r\n      :options=\"exchangeList\"\r\n    >\r\n    </Select>\r\n    <Select\r\n      id=\"tradeMode-select\"\r\n      v-model=\"exchangeModel.trade_mode\"\r\n      size=\"small\"\r\n      class=\"min-w-44\"\r\n      :options=\"tradeModes\"\r\n      option-label=\"text\"\r\n      option-value=\"value\"\r\n      :disabled=\"tradeModes.length < 2\"\r\n    >\r\n    </Select>\r\n    <Button\r\n      severity=\"secondary\"\r\n      variant=\"outlined\"\r\n      class=\"ms-2 no-min-w\"\r\n      size=\"small\"\r\n      @click=\"botStore.activeBot.getExchangeList\"\r\n    >\r\n      <template #icon>\r\n        <i-mdi-refresh />\r\n      </template>\r\n    </Button>\r\n  </div>\r\n</template>\r\n"],"names":["exchangeModel","_useModel","__props","botStore","useBotStore","exchangeList","computed","supported","ex","a","b","unsupported","tradeModesTyped","_a","tradeModes","tm","watch","onMounted"],"mappings":"wRAGM,MAAAA,EAAgBC,EAA8BC,EAAA,YAAmB,EAEjEC,EAAWC,EAAY,EAEvBC,EAAeC,EAAS,IAAM,CAC5B,MAAAC,EAAYJ,EAAS,UAAU,aAClC,OAAQK,GAAOA,EAAG,OAASA,EAAG,SAAS,EACvC,KAAK,CAACC,EAAGC,IAAMD,EAAE,KAAK,cAAcC,EAAE,IAAI,CAAC,EAExCC,EAAcR,EAAS,UAAU,aACpC,OAAQK,GAAOA,EAAG,OAAS,CAACA,EAAG,SAAS,EACxC,KAAK,CAACC,EAAGC,IAAMD,EAAE,KAAK,cAAcC,EAAE,IAAI,CAAC,EAEvC,MAAA,CACL,CACE,MAAO,YACP,QAASH,EAAU,IAAK,IAAO,CAAE,MAAO,EAAE,WAAa,EAAE,KAAM,KAAM,EAAE,MAAO,CAChF,EACA,CACE,MAAO,cACP,QAASI,EAAY,IAAK,IAAO,CAAE,MAAO,EAAE,WAAa,EAAE,KAAM,KAAM,EAAE,MAAO,CAAA,CAEpF,CAAA,CACD,EAEKC,EAAkBN,EAAS,IAAM,OAKrC,QAJYO,EAAAV,EAAS,UAAU,aAAa,KACzCK,GACCA,EAAG,OAASR,EAAc,MAAM,UAAYQ,EAAG,YAAcR,EAAc,MAAM,QAAA,IAFzE,YAAAa,EAGT,cACW,CAAC,CAAA,CAChB,EAEKC,EAAaR,EAAS,IACnBM,EAAgB,MAAM,IAAKG,IACzB,CACL,KAAM,GAAGA,EAAG,WAAW,IAAIA,EAAG,YAAY,GAC1C,MAAOA,CACT,EACD,CACF,EAED,OAAAC,EACE,IAAMhB,EAAc,MAAM,SAC1B,IAAM,CACAY,EAAgB,MAAM,OAAS,IACjCZ,EAAc,MAAM,WAAaY,EAAgB,MAAM,CAAC,EAC1D,CAEJ,EAEAK,EAAU,IAAM,CACVd,EAAS,UAAU,aAAa,SAAW,GAC7CA,EAAS,UAAU,gBAAgB,CACrC,CACD"}
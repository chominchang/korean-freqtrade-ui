{"version":3,"file":"PairListLive-Eyn3UqVc.js","sources":["../../src/components/ftbot/PairListLive.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { useBotStore } from '@/stores/ftbotwrapper';\r\nimport type Popover from 'primevue/popover';\r\n\r\nconst newblacklistpair = ref('');\r\nconst blackListShow = ref(false);\r\nconst blacklistAddPopover = ref<InstanceType<typeof Popover>>();\r\nconst blacklistSelect = ref<number[]>([]);\r\nconst botStore = useBotStore();\r\n\r\nfunction initBlacklist() {\r\n  if (botStore.activeBot.whitelist.length === 0) {\r\n    botStore.activeBot.getWhitelist();\r\n  }\r\n  if (botStore.activeBot.blacklist.length === 0) {\r\n    botStore.activeBot.getBlacklist();\r\n  }\r\n}\r\n\r\nfunction addBlacklistPair() {\r\n  if (newblacklistpair.value) {\r\n    blackListShow.value = false;\r\n    blacklistAddPopover.value?.hide();\r\n\r\n    botStore.activeBot.addBlacklist({ blacklist: [newblacklistpair.value] });\r\n    newblacklistpair.value = '';\r\n  }\r\n}\r\n\r\nfunction showPopover(event: MouseEvent) {\r\n  blacklistAddPopover.value?.show(event);\r\n}\r\n\r\nfunction blacklistSelectClick(key: number) {\r\n  const index = blacklistSelect.value.indexOf(key);\r\n  if (index > -1) {\r\n    blacklistSelect.value.splice(index, 1);\r\n  } else {\r\n    blacklistSelect.value.push(key);\r\n  }\r\n}\r\n\r\nfunction deletePairs() {\r\n  if (blacklistSelect.value.length === 0) {\r\n    console.log('nothing to delete');\r\n    return;\r\n  }\r\n  // const pairlist = blacklistSelect.value;\r\n  const pairlist = botStore.activeBot.blacklist.filter(\r\n    (value, index) => blacklistSelect.value.indexOf(index) > -1,\r\n  );\r\n  console.log('Deleting pairs: ', pairlist);\r\n  botStore.activeBot.deleteBlacklist(pairlist);\r\n  blacklistSelect.value = [];\r\n}\r\nonMounted(() => {\r\n  initBlacklist();\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <div>\r\n      <h3 class=\"text-xl\">Whitelist Methods</h3>\r\n\r\n      <ul v-if=\"botStore.activeBot.pairlistMethods.length\" class=\"list wide\">\r\n        <li\r\n          v-for=\"(method, key) in botStore.activeBot.pairlistMethods\"\r\n          :key=\"key\"\r\n          class=\"pair bg-white text-black align-middle border border-secondary\"\r\n        >\r\n          {{ method }}\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <!-- Show Whitelist -->\r\n    <h3 class=\"text-lg font-bold\" :title=\"`${botStore.activeBot.whitelist.length} pairs`\">\r\n      Whitelist\r\n    </h3>\r\n    <ul v-if=\"botStore.activeBot.whitelist.length\" class=\"list\">\r\n      <li\r\n        v-for=\"(pair, key) in botStore.activeBot.whitelist\"\r\n        :key=\"key\"\r\n        class=\"pair bg-white text-black align-middle border border-secondary\"\r\n      >\r\n        {{ pair }}\r\n      </li>\r\n    </ul>\r\n    <p v-else>List Unavailable. Please Login and make sure server is running.</p>\r\n    <Divider />\r\n\r\n    <!-- Blacklsit -->\r\n    <div>\r\n      <div class=\"flex flex-row justify-center mb-1\">\r\n        <label\r\n          class=\"text-lg font-bold mb-2 w-full\"\r\n          title=\"Blacklist - Select (followed by a click on '-') to remove pairs\"\r\n        >\r\n          Blacklist\r\n        </label>\r\n        <div class=\"flex flex-cols items-center gap-1 pe-1\">\r\n          <Button\r\n            ref=\"blacklist-add-btn\"\r\n            severity=\"secondary\"\r\n            :class=\"botStore.activeBot.botApiVersion >= 1.12 ? 'col-6' : ''\"\r\n            size=\"small\"\r\n            @click=\"showPopover\"\r\n          >\r\n            <template #icon>\r\n              <i-mdi-plus-box-outline />\r\n            </template>\r\n          </Button>\r\n          <Button\r\n            v-if=\"botStore.activeBot.botApiVersion >= 1.12\"\r\n            size=\"small\"\r\n            severity=\"secondary\"\r\n            title=\"Select pairs to delete pairs from your blacklist.\"\r\n            :disabled=\"blacklistSelect.length === 0\"\r\n            @click=\"deletePairs\"\r\n          >\r\n            <template #icon>\r\n              <i-mdi-delete />\r\n            </template>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <Popover ref=\"blacklistAddPopover\" class=\"p-1\">\r\n        <form ref=\"form\" @submit.prevent=\"addBlacklistPair\">\r\n          <div class=\"space-y-1\">\r\n            <h4 class=\"font-bold mb-2\">Add Pair to Blacklist</h4>\r\n            <div class=\"space-x-2\">\r\n              <label for=\"pair-input\">Pair</label>\r\n              <InputText id=\"pair-input\" v-model=\"newblacklistpair\" required autofocus></InputText>\r\n            </div>\r\n            <Button\r\n              id=\"blacklist-submit\"\r\n              class=\"float-end mb-2\"\r\n              size=\"small\"\r\n              severity=\"primary\"\r\n              type=\"submit\"\r\n            >\r\n              Add\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </Popover>\r\n    </div>\r\n    <ul v-if=\"botStore.activeBot.blacklist.length\" class=\"list\">\r\n      <li\r\n        v-for=\"(pair, key) in botStore.activeBot.blacklist\"\r\n        :key=\"key\"\r\n        class=\"pair bg-black text-white text-ellipsis overflow-hidden\"\r\n        :title=\"pair\"\r\n        :class=\"blacklistSelect.indexOf(key) > -1 ? 'active' : ''\"\r\n        @click=\"blacklistSelectClick(key)\"\r\n      >\r\n        <span class=\"check\"><i-mdi-check-circle /></span>{{ pair }}\r\n      </li>\r\n    </ul>\r\n    <p v-else>BlackList Unavailable. Please Login and make sure server is running.</p>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n@reference '../../styles/tailwind.css';\r\n\r\n.check {\r\n  /* Hidden checkbox on blacklist selection */\r\n  color: #41b883;\r\n  opacity: 0;\r\n  /* border-radius: 50%; */\r\n  z-index: 5;\r\n  width: 1.3em;\r\n  height: 1.3em;\r\n  top: -0.3em;\r\n  left: -0.3em;\r\n  position: absolute;\r\n  transition: opacity 0.2s;\r\n}\r\n\r\n.pair.active .check {\r\n  opacity: 1;\r\n}\r\n\r\n.list {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));\r\n  grid-gap: 0.5rem;\r\n  padding-bottom: 1rem;\r\n}\r\n.wide {\r\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\r\n}\r\n\r\n.pair {\r\n  @apply p-2 border rounded cursor-pointer relative border-surface-500;\r\n}\r\n</style>\r\n"],"names":["newblacklistpair","ref","blackListShow","blacklistAddPopover","blacklistSelect","botStore","useBotStore","initBlacklist","addBlacklistPair","_a","showPopover","event","blacklistSelectClick","key","index","deletePairs","pairlist","value","onMounted"],"mappings":"+pBAIM,MAAAA,EAAmBC,EAAI,EAAE,EACzBC,EAAgBD,EAAI,EAAK,EACzBE,EAAsBF,EAAkC,EACxDG,EAAkBH,EAAc,EAAE,EAClCI,EAAWC,EAAY,EAE7B,SAASC,GAAgB,CACnBF,EAAS,UAAU,UAAU,SAAW,GAC1CA,EAAS,UAAU,aAAa,EAE9BA,EAAS,UAAU,UAAU,SAAW,GAC1CA,EAAS,UAAU,aAAa,CAClC,CAGF,SAASG,GAAmB,OACtBR,EAAiB,QACnBE,EAAc,MAAQ,IACtBO,EAAAN,EAAoB,QAApB,MAAAM,EAA2B,OAElBJ,EAAA,UAAU,aAAa,CAAE,UAAW,CAACL,EAAiB,KAAK,EAAG,EACvEA,EAAiB,MAAQ,GAC3B,CAGF,SAASU,EAAYC,EAAmB,QAClBF,EAAAN,EAAA,QAAA,MAAAM,EAAO,KAAKE,EAAK,CAGvC,SAASC,EAAqBC,EAAa,CACzC,MAAMC,EAAQV,EAAgB,MAAM,QAAQS,CAAG,EAC3CC,EAAQ,GACMV,EAAA,MAAM,OAAOU,EAAO,CAAC,EAErBV,EAAA,MAAM,KAAKS,CAAG,CAChC,CAGF,SAASE,GAAc,CACjB,GAAAX,EAAgB,MAAM,SAAW,EAAG,CACtC,QAAQ,IAAI,mBAAmB,EAC/B,MAAA,CAGI,MAAAY,EAAWX,EAAS,UAAU,UAAU,OAC5C,CAACY,EAAOH,IAAUV,EAAgB,MAAM,QAAQU,CAAK,EAAI,EAC3D,EACQ,QAAA,IAAI,mBAAoBE,CAAQ,EAC/BX,EAAA,UAAU,gBAAgBW,CAAQ,EAC3CZ,EAAgB,MAAQ,CAAC,CAAA,CAE3B,OAAAc,EAAU,IAAM,CACAX,EAAA,CAAA,CACf"}